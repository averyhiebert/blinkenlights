{"inkVersion":20,"root":[["\n","\n","\n","\n","\n","\n","\n","\n","\n","\n","ev",{"VAR?":"DEBUG"},"/ev",[{"->":".^.b","c":true},{"b":["\n","ev",true,"/ev",{"VAR=":"found_secret","re":true},{"->":"cave_entrance.cave1"},{"->":"level4_debrief"},{"->":"0.14"},null]}],"nop","\n",{"->":"start"},["done",{"#n":"g-0"}],null],"done",{"debug_scene":[[{"#":"AUDIOLOOP: level2"},"^This is a debug screen","\n","ev","str","ev",5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^Music should change now","\n",{"#":"AUDIOLOOP: level4"},"ev","str","ev",5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-1":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":[{"#":"AUDIOLOOP: silence"},"^Now fading to silence","\n","ev","str","ev",5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-2","flg":4},{"c-2":["\n",{"->":".^.^.^.g-2"},null]}],"g-2":["^Now back to music","\n",{"#":"AUDIOLOOP: level2"},"end",null]}],null],"test":[[{"#":"CLEAR"},"^You are in a garden.","\n","ev",{"VAR?":"night"},"/ev",[{"->":".^.b","c":true},{"b":["\n","^The full moon hangs low in the night sky.","\n",{"->":"test.0.8"},null]}],[{"->":".^.b"},{"b":["\n","^The hot summer sun glares down upon you.","\n",{"->":"test.0.8"},null]}],"nop","\n","ev","str","^BLINK","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go to river.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",{"VAR?":"night"},"!","/ev",{"VAR=":"night","re":true},{"->":"test"},null],"c-1":["\n",{"->":"river"},null]}],null],"river":[[{"#":"CLEAR"},"^You are by the river.","\n","ev","str","^test","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":"test"},null]}],null],"start":[[{"#":"CLEAR"},{"#":"AUDIOLOOP: silence"},"^Thank you for your interest in our study.","\n","^We will be observing your behaviour within a series of perfectly safe, digitally-simulated environments which we call The Labyrinth.","\n","^This experiment will gather valuable information about human behaviour.","\n","^Do you consent to participate in this experiment?","\n","ev","str","^I will participate.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^I will not participate.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^Excellent.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^There has been a misunderstanding. You [i]will[/i] participate.","\n","^We are merely asking for your consent, as required for ethics board approval.","\n",["ev","str","^I consent.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^I do not consent.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^Excellent.","\n",{"->":"start.0.g-0"},{"#f":5}],"c-1":["\n","^Understandable.","\n","^Please blink to indicate when you have changed your mind.","\n",{"->t->":"blink_continue"},"^Thank you for your cooperation.","\n",{"->":"start.0.g-0"},{"#f":5}]}],{"#f":5}],"g-0":[{"->t->":"continue"},"ev",0,"/ev",{"temp=":"blink_count"},["^We must begin the syncing procedure.","\n","^Please blink twice in a row.","\n","ev",{"VAR?":"blink_count"},2,"==","/ev",{"*":".^.c-2","flg":25},"ev","str","ev","str","^BLINK","/str","out","/ev","/str",{"VAR?":"blink_count"},2,"<","/ev",{"*":".^.c-3","flg":5},"ev","str","ev",1,{"f()":"timer"},"out","/ev","/str",{"VAR?":"blink_count"},2,"<","/ev",{"*":".^.c-4","flg":5},{"c-2":["\n",{"#":"CLEAR"},"ev",0,"/ev",{"temp=":"blink_count","re":true},{"->":"start.0.sync2"},{"#f":5}],"c-3":["\n","ev",{"VAR?":"blink_count"},1,"+",{"temp=":"blink_count","re":true},"/ev",{"->":".^.^"},{"->":"start.0.sync2"},null],"c-4":["\n","ev",0,"/ev",{"temp=":"blink_count","re":true},{"->":".^.^"},{"->":"start.0.sync2"},null],"#n":"sync1"}],null],"sync2":["^Please blink 3 times in a row.","\n","ev",{"VAR?":"blink_count"},3,"==","/ev",{"*":".^.c-5","flg":25},"ev","str","ev","str","^BLINK","/str","out","/ev","/str",{"VAR?":"blink_count"},3,"<","/ev",{"*":".^.c-6","flg":5},"ev","str","ev",1.5,{"f()":"timer"},"out","/ev","/str",{"VAR?":"blink_count"},3,"<","/ev",{"*":".^.c-7","flg":5},{"c-5":["\n",{"#":"CLEAR"},{"->":".^.^.^.intro_close_eyes"},{"#f":5}],"c-6":["\n","ev",{"VAR?":"blink_count"},1,"+",{"temp=":"blink_count","re":true},"/ev",{"->":".^.^"},{"->":".^.^.^.intro_close_eyes"},null],"c-7":["\n","ev",0,"/ev",{"temp=":"blink_count","re":true},{"->":".^.^"},{"->":".^.^.^.intro_close_eyes"},null]}],"intro_close_eyes":["^Please close your eyes for 5 seconds.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-8","flg":4},{"c-8":["\n","^Please close your eyes for 5 seconds.","\n",["ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev",4.5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.^.^"},{"->":"start.0.sync_done"},null],"c-1":["\n",{"->":"start.0.sync_done"},{"->":"start.0.sync_done"},null]}],null]}],"sync_done":["^SYNC COMPLETE","\n","ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-9","flg":4},{"c-9":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":[{"#":"AUDIOLOOP: portal_idle"},"^SYNC COMPLETE","\n","ev","str","^Enter the labyrinth...","/str","/ev",{"*":".^.c-10","flg":4},{"c-10":["\n",{"->":"first_chamber"},null]}]}],null],"blink_continue":[["ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","ev","void","/ev","->->","\n",null]}],null],"continue":[["ev","str","^Continue...","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ","<>","^ ","ev","void","/ev","->->","\n",null]}],null],"timer":[{"temp=":"seconds"},"ev","str","^TIMER ","/str",{"VAR?":"seconds"},"+","/ev","~ret",null],"random_switch":[{"temp=":"list"},"ev",{"VAR?":"list"},"LIST_ALL",{"VAR?":"list"},"-","lrnd","/ev",{"temp=":"list","re":true},"\n",null],"enter_portal":[{"#":"AUDIOLOOP: portal_idle"},{"#":"AUDIO: portal_jump"},"ev","void","/ev","->->",null],"choose_from":[{"temp=":"candidates"},"ev",{"VAR?":"candidates"},"/ev","thread",{"->":".^.choice_for_each"},"done",{"choice_for_each":[{"temp=":"candidates"},["ev",{"VAR?":"candidates"},"LIST_COUNT",0,"==","/ev",[{"->":".^.b","c":true},{"b":["\n","done",{"->":".^.^.^.7"},null]}],"nop","\n","ev",{"VAR?":"candidates"},"LIST_MIN","/ev",{"temp=":"curr"},"\n","ev",{"VAR?":"candidates"},{"VAR?":"curr"},"-","/ev","thread",{"->":".^.^"},"ev","str","ev",{"VAR?":"curr"},"out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","ev",{"VAR?":"curr"},"/ev",{"VAR=":"ITEM_SELECTED","re":true},"ev","void","/ev","->->","done",null]}],null]}],"pop":[{"temp=":"_list"},"ev",{"VAR?":"_list"},"LIST_MIN","/ev",{"temp=":"el"},"\n","ev",{"VAR?":"_list"},{"VAR?":"el"},"-",{"temp=":"_list","re":true},"/ev","ev",{"VAR?":"el"},"/ev","~ret",null],"random_pop":[{"temp=":"_list"},"ev",{"VAR?":"_list"},"lrnd","/ev",{"temp=":"el"},"\n","ev",{"VAR?":"_list"},{"VAR?":"el"},"-",{"temp=":"_list","re":true},"/ev","ev",{"VAR?":"el"},"/ev","~ret",null],"listWithCommas":[{"temp=":"if_empty"},{"temp=":"list"},"ev",{"VAR?":"list"},"LIST_COUNT","/ev",["du","ev",2,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"list"},"LIST_MIN","out","/ev","^ and ","ev",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"if_empty"},{"f()":".^.^.^"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],["du","ev",1,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"list"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],["du","ev",0,"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"if_empty"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["pop","\n","ev",{"VAR?":"list"},"LIST_MIN","out","/ev","^, ","ev",{"VAR?":"list"},{"VAR?":"list"},"LIST_MIN","-",{"VAR?":"if_empty"},{"f()":".^.^.^"},"out","/ev","\n",{"->":".^.^.^.10"},null]}],"nop","\n",null],"first_chamber":[{"#":"AUDIO: portal_jump"},{"#":"AUDIOLOOP: level1"},{"->":".^.garden"},{"garden":[["^You find yourself in a",["ev","visit",5,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"nop",{"s0":["pop","^ strange",{"->":".^.^.35"},null],"s1":["pop","^ beautiful",{"->":".^.^.35"},null],"s2":["pop","^ forgotten",{"->":".^.^.35"},null],"s3":["pop","^n ancient",{"->":".^.^.35"},null],"s4":["pop","^ tranquil",{"->":".^.^.35"},null],"#f":5}],"^ garden.","\n","^A ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^cobblestone",{"->":".^.^.23"},null],"s1":["pop","^marble",{"->":".^.^.23"},null],"s2":["pop","^tiled",{"->":".^.^.23"},null],"#f":5}],"^ path runs from ","ev",{"VAR?":"path_NS"},"/ev",[{"->":".^.b","c":true},{"b":["^north to south",{"->":".^.^.^.12"},null]}],[{"->":".^.b"},{"b":["^east to west",{"->":".^.^.^.12"},null]}],"nop","^, lined with ",["ev","visit",8,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"ev","du",6,"==","/ev",{"->":".^.s6","c":true},"ev","du",7,"==","/ev",{"->":".^.s7","c":true},"nop",{"s0":["pop","^lillies",{"->":".^.^.53"},null],"s1":["pop","^tulips",{"->":".^.^.53"},null],"s2":["pop","^roses",{"->":".^.^.53"},null],"s3":["pop","^stone lanterns",{"->":".^.^.53"},null],"s4":["pop","^mossy stones",{"->":".^.^.53"},null],"s5":["pop","^human skulls",{"->":".^.^.53"},null],"s6":["pop","^poplar trees",{"->":".^.^.53"},null],"s7":["pop","^cyprus trees",{"->":".^.^.53"},null],"#f":5}],"^.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^North","/str",{"VAR?":"path_NS"},"/ev",{"*":".^.c-1","flg":5},"ev","str","^South","/str",{"VAR?":"path_NS"},"/ev",{"*":".^.c-2","flg":5},"ev","str","^East","/str",{"VAR?":"path_NS"},"!","/ev",{"*":".^.c-3","flg":5},"ev","str","^West","/str",{"VAR?":"path_NS"},"!","/ev",{"*":".^.c-4","flg":5},{"c-0":["\n","ev",{"VAR?":"path_NS"},"!","/ev",{"VAR=":"path_NS","re":true},{"->":".^.^.^"},null],"c-1":["\n",{"->":".^.^.^.^.garden_north"},null],"c-2":["\n",{"->":".^.^.^.^.garden_south"},null],"c-3":["\n",{"->":".^.^.^.^.garden_east"},null],"c-4":["\n",{"->":".^.^.^.^.garden_west"},null]}],null],"garden_north":[["^You stand before an imposing wall covered with ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^flowing calligraphy in a forgotten script",{"->":".^.^.23"},null],"s1":["pop","^the scars of a thousand forgotten battles",{"->":".^.^.23"},null],"s2":["pop","^thick ivy choking the already-dead stones",{"->":".^.^.23"},null],"#f":5}],"^.","\n","^The only exit is a massive gate with a heavy iron portcullis.  The portcullis is ","ev",{"VAR?":"portcullis_raised"},"/ev",[{"->":".^.b","c":true},{"b":["^ now in the raised position, offering free passage",{"->":".^.^.^.10"},null]}],[{"->":".^.b"},{"b":["^ firmly shut",{"->":".^.^.^.10"},null]}],"nop","^.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Exit via portcullis","/str",{"VAR?":"portcullis_raised"},"/ev",{"*":".^.c-2","flg":5},{"c-0":["\n",{"->":".^.^.^"},null],"c-1":["\n",{"->":".^.^.^.^.garden"},null],"c-2":["\n",{"->":".^.^.^.^.debrief"},null]}],null],"garden_south":[["^You stand before a giant marble basin.","\n","ev",{"VAR?":"water_temp"},"/ev",["du","ev",{"VAR?":"hot"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^A copious amount of steam rises continuously from the near-boiling water.","\n",{"->":".^.^.^.9"},null]}],["du","ev",{"VAR?":"cold"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The surface of the water is frozen solid, at least an inch thick.","\n",{"->":".^.^.^.9"},null]}],["du","ev",{"VAR?":"normal"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The surface of the water shimmers, disturbed by water-walking insects.","\n",{"->":".^.^.^.9"},null]}],"pop","nop","\n","ev",{"VAR?":"inventory"},{"VAR?":"golden_key"},"!?","/ev",[{"->":".^.b","c":true},{"b":["^You see a golden key glinting at the bottom of the basin.",{"->":".^.^.^.17"},null]}],"nop","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Try to grab the key","/str",{"VAR?":"inventory"},{"VAR?":"golden_key"},"!?","/ev",{"*":".^.c-1","flg":5},"ev","str","^Go back","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","ev",{"^var":"water_temp","ci":-1},{"f()":"random_switch"},"pop","/ev","\n",{"->":".^.^.^"},null],"c-1":["\n","ev",{"VAR?":"water_temp"},"/ev",["du","ev",{"VAR?":"hot"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","ev",{"VAR?":"player_status"},{"VAR?":"scalded_hand"},"?","/ev",[{"->":".^.b","c":true},{"b":["\n","^You know better than to reach into the scalding water again.","\n",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["\n","^You immediately yank your hand back as it touches the scalding water.","\n","^Your hand is now visibly burned.","\n","ev",{"VAR?":"player_status"},{"VAR?":"scalded_hand"},"+",{"VAR=":"player_status","re":true},"/ev",{"->":".^.^.^.9"},null]}],"nop","\n",{"->t->":"continue"},{"->":".^.^.^.^.^"},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"cold"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The ice is too thick to break.","\n",{"->t->":"continue"},{"->":".^.^.^.^.^"},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"normal"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^You easily reach into the water and grab the golden key.","\n","ev",{"VAR?":"inventory"},{"VAR?":"golden_key"},"+",{"VAR=":"inventory","re":true},"/ev",{"->t->":"continue"},{"->":".^.^.^.^.^"},{"->":".^.^.^.8"},null]}],"pop","nop","\n",null],"c-2":["\n",{"->":".^.^.^.^.garden"},null]}],null],"garden_east":[["^You see a sprawling banyan tree casting shade over a wide area.","\n","ev","str","^Go back","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.^.^.garden"},null]}],{"#f":1}],"garden_west":[["^You see a small house-like building with an elaborate conical roof.","\n","^The ","ev",{"VAR?":"door_type"},"out","/ev","^ door is ","ev",{"VAR?":"west_door_locked"},"/ev",[{"->":".^.b","c":true},{"b":["^locked",{"->":".^.^.^.13"},null]}],[{"->":".^.b"},{"b":["^unlocked",{"->":".^.^.^.13"},null]}],"nop","^.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Try the key in the door","/str",{"VAR?":"inventory"},{"VAR?":"golden_key"},"?",{"VAR?":"west_door_locked"},"&&","/ev",{"*":".^.c-1","flg":5},"ev","str","^Go inside","/str",{"VAR?":"west_door_locked"},"!","/ev",{"*":".^.c-2","flg":5},"ev","str","^East","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n","ev",{"^var":"door_type","ci":-1},{"f()":"random_switch"},"pop","/ev","\n",{"->":".^.^.^"},null],"c-1":["\n","ev",{"VAR?":"door_type"},{"VAR?":"golden"},"==","/ev",[{"->":".^.b","c":true},{"b":["\n","^The golden key unlocks the golden door easily.","\n","ev",false,"/ev",{"VAR=":"west_door_locked","re":true},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^The key does not fit whatsoever.","\n",{"->":".^.^.^.8"},null]}],"nop","\n",{"->t->":"continue"},{"->":".^.^.^"},null],"c-2":["\n","ev",{"VAR?":"door_type"},"/ev",["du","ev",{"VAR?":"golden"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":".^.^.^.^.^.^.treasure_room"},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"oaken"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":".^.^.^.^.^.^.lever_room"},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"iron"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":".^.^.^.^.^.^.dungeon"},{"->":".^.^.^.8"},null]}],"pop","nop","\n",null],"c-3":["\n",{"->":".^.^.^.^.garden"},null]}],null],"treasure_room":[[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The golden door opens into",{"->":".^.^.17"},null],"s1":["pop","^You are once again in",{"->":".^.^.17"},null],"#f":5}],"^ a room filled with treasure - elaborate rugs, porcelain vases, silken garments, and more.","\n","ev","str","^Pocket something valuable","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Exit","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^You grab a platinum pocket-watch.","\n","ev",{"VAR?":"inventory"},{"VAR?":"pocket_watch"},"+",{"VAR=":"inventory","re":true},"/ev",{"->t->":"continue"},{"->":".^.^.^"},{"#f":5}],"c-1":["^ ",{"->":".^.^.^.^.garden_west"},"\n",null]}],{"#f":1}],"lever_room":[[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The oaken door leads to",{"->":".^.^.17"},null],"s1":["pop","^You are in",{"->":".^.^.17"},null],"#f":5}],"^ a room filled with machinery and tools.","\n","^There is a prominent lever on the wall, in the ","ev",{"VAR?":"portcullis_raised"},"/ev",[{"->":".^.b","c":true},{"b":["^up",{"->":".^.^.^.9"},null]}],[{"->":".^.b"},{"b":["^down",{"->":".^.^.^.9"},null]}],"nop","^ position.","\n","ev","str","^Flip the lever","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Exit","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^The rusty lever reluctantly slides into the other position.","\n","ev",{"VAR?":"portcullis_raised"},"!","/ev",{"VAR=":"portcullis_raised","re":true},{"->t->":"continue"},{"->":".^.^.^"},null],"c-1":["^ ",{"->":".^.^.^.^.garden_west"},"\n",null]}],null],"dungeon":[[["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The iron door creaks open, revealing",{"->":".^.^.17"},null],"s1":["pop","^You once again find yourself inside",{"->":".^.^.17"},null],"#f":5}],"^ a damp, unlit, mostly empty room.  You see only a cot and some rusty chains attached to a ring in the wall.","\n","ev","str","^Exit","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":".^.^.^.^.garden_west"},"\n",null]}],{"#f":1}],"debrief":[["ev",{"VAR?":"level_success"},{"VAR?":"L1"},"+",{"VAR=":"level_success","re":true},"/ev",{"->t->":"enter_portal"},"^FIRST CHAMBER COMPLETE","\n","^Tell us, what happened in the first chamber?","\n","ev","str","^I was in a garden","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^Of course. Obviously.","\n",{"->":".^.^.garden_updates"},null],"garden_updates":["^What ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^else",{"->":".^.^.17"},null],"#f":5}],"^ do you remember about the garden?","\n","thread",{"->":".^.^.^.^.garden_questions"},"ev",{"^->":"first_chamber.debrief.0.garden_updates"},{"^->":"second_chamber"},"/ev","thread",{"->":"debrief_questions"},"done",{"#f":7}]}],null],"garden_questions":[["ev","str","^There was a large banyan tree.","/str",{"CNT?":".^.^.^.garden_east"},"/ev",{"*":".^.c-0","flg":21},"ev","str","^I think I found some sort of prison cell?","/str",{"CNT?":".^.^.^.dungeon"},"/ev",{"*":".^.c-1","flg":21},"ev","str","^I found some sort of treasure-room.","/str",{"CNT?":".^.^.^.treasure_room"},"/ev",{"*":".^.c-2","flg":21},{"c-0":["\n","^Interesting.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^What makes you say that?","\n",["ev","str","^It had an iron door and chains on the walls.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^On second thought, never mind.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^I think you might be overthinking this.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-2":["\n","^Did you take anything from it?","\n","ev",false,"/ev",{"temp=":"lied"},["ev","str","^Yes.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^No.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","ev",{"VAR?":"inventory"},{"VAR?":"pocket_watch"},"!?","/ev",{"temp=":"lied","re":true},{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","ev",{"VAR?":"inventory"},{"VAR?":"pocket_watch"},"?","/ev",{"temp=":"lied","re":true},{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev",{"VAR?":"lied"},"/ev",[{"->":".^.b","c":true},{"b":["\n","^Please do not lie to us.  This is a scientific experiment.","\n",{"->":".^.^.^.5"},null]}],[{"->":".^.b"},{"b":["\n","^Interesting.","\n",{"->":".^.^.^.5"},null]}],"nop","\n",{"->":".^.^.^.^.g-0"},null]}],{"#f":5}],"g-0":[{"->":".^.^.^.^.debrief.0.garden_updates"},null]}],null]}],"second_chamber":[{"#":"AUDIO: portal_jump"},{"#":"AUDIOLOOP: level2"},"ev",{"f()":"randomize_lights"},"pop","/ev","\n",{"->":"the_bridge"},{"#f":3}],"randomize_lights":["ev",{"VAR?":"colours"},"LIST_ALL","/ev",{"temp=":"all_possible"},"\n","ev",{"list":{}},"/ev",{"VAR=":"lights_on","re":true},"ev",{"VAR?":"lights_on"},{"^var":"all_possible","ci":-1},{"f()":"random_pop"},"+",{"VAR=":"lights_on","re":true},"/ev","\n","ev",{"VAR?":"lights_on"},{"^var":"all_possible","ci":-1},{"f()":"random_pop"},"+",{"VAR=":"lights_on","re":true},"/ev","\n","ev",{"VAR?":"lights_on"},{"^var":"all_possible","ci":-1},{"f()":"random_pop"},"+",{"VAR=":"lights_on","re":true},"/ev","\n",null],"blink_randomize_lights":[{"temp=":"next"},["ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","ev",{"f()":"randomize_lights"},"pop","/ev","\n",{"->":"next","var":true},null]}],null],"the_bridge":[["ev",{"VAR?":"water_level"},"/ev",["du","ev",{"VAR?":"sunk"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":".^.^.^.^.sinking"},{"->":".^.^.^.6"},null]}],["du","ev",{"VAR?":"resolved"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"->":".^.^.^.^.survived"},{"->":".^.^.^.6"},null]}],"pop","nop","\n","^You are on the bridge of a sinking cargo ship.  Alarms are blaring.","\n","^The only person in sight is the Captain, who is ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^still",{"->":".^.^.17"},null],"#f":5}],"^ struggling with some sort of control console.","\n","ev",{"^->":"the_bridge"},"/ev","thread",{"->":"blink_randomize_lights"},"ev","str","^Talk to the Captain","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^To Hallway","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^DEBUG show light sequence","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n",{"->t->":"talk_captain"},{"->":".^.^.^"},null],"c-1":["^ ",{"->":".^.^.^.hallway"},"\n",null],"c-2":["\n","ev",{"VAR?":"lights_on"},"out","/ev","^.","\n",{"->":".^.^.^"},null]}],{"hallway":[["^The hallway is dark and narrow.  The only light source is ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^a small porthole",{"->":".^.^.23"},null],"s1":["pop","^a failing incandescent bulb",{"->":".^.^.23"},null],"s2":["pop","^the glow of a red warning light",{"->":".^.^.23"},null],"#f":5}],"^.","\n","ev",{"^->":"the_bridge.hallway"},"/ev","thread",{"->":"blink_randomize_lights"},"ev","str","^To the bridge","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Down the ladder","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^.^.^"},"\n",null],"c-1":["^ ",{"->":".^.^.^.^.engine_room"},"\n",null]}],{"#f":3}],"engine_room":[["^The engine room is filled with the scent of ","ev",{"VAR?":"water_level"},{"VAR?":"low"},"<=","/ev",[{"->":".^.b","c":true},{"b":["^diesel",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^seawater and diesel",{"->":".^.^.^.8"},null]}],"nop","^.","\n","ev",{"VAR?":"water_level"},"/ev",["du","ev",{"VAR?":"very_low"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The floor is covered in an inch or two of salt water, seeping in from somewhere below.","\n",{"->":".^.^.^.19"},null]}],["du","ev",{"VAR?":"low"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The ship is taking on water rapidly; it's up to your knees already.","\n",{"->":".^.^.^.19"},null]}],["du","ev",{"VAR?":"medium"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^The water is now waste-high, and it's getting difficult to walk in here.","\n",{"->":".^.^.^.19"},null]}],["du","ev",{"VAR?":"high"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^You are submerged in icy water up to your chest.","\n",{"->":".^.^.^.19"},null]}],"pop","nop","\n","ev",{"^->":"the_bridge.engine_room"},"/ev","thread",{"->":"blink_randomize_lights"},"ev","str","^Up the ladder","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Check indicator panel","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^.^.^.hallway"},"\n",null],"c-1":["^ ",{"->":".^.^.^.^.indicator_panel"},"\n",null]}],{"#f":3}],"indicator_panel":[["^The ","ev",{"VAR?":"lights_on"},"str","^","/str",{"f()":"listWithCommas"},"out","/ev","^ lights are on.","\n","ev",{"^->":"the_bridge.indicator_panel"},"/ev","thread",{"->":"blink_randomize_lights"},"ev","str","^Ok.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["^ ",{"->":".^.^.^.^.engine_room"},"\n",null]}],{"#f":3}],"sinking":[["^\"You idiot! You've doomed us both!\"","\n","^The ship suddenly tilts, and both you and the captain are dumped into the hallway, which is already filled with water.","\n",{"->t->":"continue"},"^Cold water covers your head and the mammalian dive reflex kicks in.","\n","^You instinctively close your eyes.","\n","ev","str","ev",1.5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^Cold water covers your head and the mammalian dive reflex kicks in.","\n","^You instinctively close your eyes.","\n","^PLEASE INSTINCTIVELY CLOSE YOUR EYES.","\n",{"->":".^.^.g-0"},null],"c-1":["\n",{"->":".^.^.g-0"},null],"g-0":["ev","str","ev",1,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-3","flg":4},{"c-2":["\n",{"->":".^.^.^.g-1"},null],"c-3":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":[{"->":"level2_debrief"},"ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-4","flg":4},{"c-4":["^ ",{"->":"level2_debrief"},"\n",null]}]}],null],"survived":["ev",{"VAR?":"level_success"},{"VAR?":"L2"},"+",{"VAR=":"level_success","re":true},"/ev","^Deep within the ship, you hear dozens of pumps roar into operation.","\n","^\"Finally!\"","\n","^The Captain breathes a sigh of relief as the ship slowly begins to right itself.","\n",{"->t->":"continue"},{"->":"level2_debrief"},null],"#f":3}],"talk_captain":["ev",{"CNT?":".^"},1,"==","/ev",[{"->":".^.b","c":true},{"b":["\n",{"->":".^.^.^.first_conversation"},{"->":".^.^.^.7"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.waiting_for_answer"},{"->":".^.^.^.7"},null]}],"nop","\n",{"first_conversation":[["^\"Hey, you! I need your help.\"","\n",["ev","str","^What do you need me to do?","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Why me?","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^\"At the end of the hallway, there's a ladder down to the engine room.\"","\n",["ev","str","^Ok...","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^\"In the engine room, there should be a display with several lights on it.\"","\n","ev","str","^Ok...","/str","/ev",{"*":".^.c-1","flg":20},{"c-1":["\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":["^\"I need you to go there, check those indicator lights, come back, and tell me which lights are ON.  Can you do that?\"","\n","ev","str","^Sure.","/str","/ev",{"*":".^.c-2","flg":20},{"c-2":["\n",{"->":".^.^.^.g-2"},{"#f":5}]}],"g-2":["^\"Great.  Get a move on, we don't have all day.\"","\n",{"->t->":"continue"},"ev","void","/ev","->->",null]}],{"#f":5}],"c-1":["\n","^\"Do you see anyone else on this godforsaken ship?\"","\n",["ev","str","^No.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^\"Then it'll have to be you.  Unless you'd rather that we both drown?\"","\n","ev","str","^Of course not.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Maybe.  This is just a simulation, isn't it?","/str","/ev",{"*":".^.c-2","flg":20},{"c-1":["\n","^\"Thought so.\"","\n",{"->":".^.^.^.g-1"},{"#f":5}],"c-2":["\n","^\"I don't have time for jokes, buddy.\"","\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":[{"->":".^.^.^.^"},null]}],{"#f":5}],"#n":"captain_ask"}],null],null],"waiting_for_answer":["ev",{"VAR?":"water_level"},{"VAR?":"very_low"},"==","/ev",[{"->":".^.b","c":true},{"b":["\n","^\"You're back.  Did you check which lights are on in the engine room?\"","\n","ev","str","^No.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Yes.","/str","/ev",{"*":".^.c-1","flg":4},{"->":".^.^.^.7"},{"c-0":["\n","^\"Then quit wasting my time and go do it already!\"","\n",{"->t->":"continue"},"ev","void","/ev","->->",null],"c-1":["\n",{"->":".^.^.^.^.^.specify_lights"},null]}]}],[{"->":".^.b"},{"b":["\n","^\"Which lights are on? You'd better get it right this time.\"","\n",{"->":".^.^.^.^.specify_lights"},{"->":".^.^.^.7"},null]}],"nop","\n",null],"specify_lights":["ev",{"VAR?":"colours"},"LIST_ALL","/ev",{"temp=":"candidates"},"\n","ev",{"list":{}},"/ev",{"temp=":"selection"},"^The lights that were on were...","\n","ev",{"VAR?":"candidates"},"/ev",{"->t->":"choose_from"},"ev",{"VAR?":"selection"},{"VAR?":"ITEM_SELECTED"},"+",{"temp=":"selection","re":true},"/ev","ev",{"VAR?":"candidates"},{"VAR?":"selection"},"-",{"temp=":"candidates","re":true},"/ev","ev",{"VAR?":"candidates"},"/ev",{"->t->":"choose_from"},"ev",{"VAR?":"selection"},{"VAR?":"ITEM_SELECTED"},"+",{"temp=":"selection","re":true},"/ev","ev",{"VAR?":"candidates"},{"VAR?":"selection"},"-",{"temp=":"candidates","re":true},"/ev","ev",{"VAR?":"candidates"},"/ev",{"->t->":"choose_from"},"ev",{"VAR?":"selection"},{"VAR?":"ITEM_SELECTED"},"+",{"temp=":"selection","re":true},"/ev","ev",{"VAR?":"candidates"},{"VAR?":"selection"},"-",{"temp=":"candidates","re":true},"/ev","^The captain enters ","ev",{"VAR?":"selection"},"str","^","/str",{"f()":"listWithCommas"},"out","/ev","^ on the command console...","\n",{"->t->":"continue"},"ev",{"VAR?":"selection"},{"VAR?":"lights_on"},"==","/ev",[{"->":".^.b","c":true},{"b":["\n","ev",{"VAR?":"resolved"},"/ev",{"VAR=":"water_level","re":true},"ev","void","/ev","->->",{"->":".^.^.^.79"},null]}],[{"->":".^.b"},{"b":["\n",{"->":".^.^.^.^.wrong_answer"},{"->":".^.^.^.79"},null]}],"nop","\n",null],"wrong_answer":["ev",{"VAR?":"water_level"},"/ev",["du","ev",{"VAR?":"very_low"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^Nothing happens.","\n","^The captain grumbles.","\n","^\"That wasn't right at all.  Go double-check the indicator panel.\"","\n","ev",{"VAR?":"low"},"/ev",{"VAR=":"water_level","re":true},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"low"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n","^A second alarm starts to go off.","\n","^\"Get your shit together and try that one more time.\"","\n","ev",{"VAR?":"medium"},"/ev",{"VAR=":"water_level","re":true},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"medium"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"#":"AUDIO: explosion"},"^Something in the depths of the ship explodes, startling the captain.","\n","^\"Do you understand the situation we're in? You have one chance to get this right, or we're both dead!\"","\n","ev",{"VAR?":"high"},"/ev",{"VAR=":"water_level","re":true},{"->":".^.^.^.8"},null]}],["du","ev",{"VAR?":"high"},"==","/ev",{"->":".^.b","c":true},{"b":["pop","\n",{"#":"AUDIO: explosion"},"^Another loud explosion echoes throughout the ship.","\n","ev",{"VAR?":"sunk"},"/ev",{"VAR=":"water_level","re":true},{"->":".^.^.^.8"},null]}],"pop","nop","\n",{"->t->":"continue"},"ev","void","/ev","->->",null],"#f":1}],"level2_debrief":[[{"->t->":"enter_portal"},"ev",{"VAR?":"level_success"},{"VAR?":"L2"},"?","/ev",[{"->":".^.b","c":true},{"b":["\n","^SECOND CHAMBER COMPLETE","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^ADVERSE EVENT DETECTED","\n","^SECOND CHAMBER ABORTED","\n",{"->":".^.^.^.8"},null]}],"nop","\n","^Tell us, what happened in the second chamber?","\n","ev","str","^I was on a sinking ship.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.top"},null],"top":["^What ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^else",{"->":".^.^.17"},null],"#f":5}],"^ do you remember about this ship?","\n","ev",{"^->":"level2_debrief.0.top"},"/ev","thread",{"->":".^.^.^.ship_questions"},"ev",{"^->":"level2_debrief.0.top"},{"^->":"third_chamber"},"/ev","thread",{"->":"debrief_questions"},"done",{"#f":7}]}],{"ship_questions":[{"temp=":"back"},["ev","str","^I helped the Captain rescue the ship.","/str",{"VAR?":"level_success"},{"VAR?":"L2"},"?","/ev",{"*":".^.c-0","flg":21},"ev","str","^The ship sank.","/str",{"VAR?":"level_success"},{"VAR?":"L2"},"!?","/ev",{"*":".^.c-1","flg":21},{"c-0":["\n","^Interesting.","\n",{"->":"back","var":true},{"#f":5}],"c-1":["\n","^Was it your fault?","\n",["ev","str","^Yes.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^No.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Maybe?","/str","/ev",{"*":".^.c-2","flg":20},{"c-0":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^Did you drown?","\n","ev","str","^Yes.","/str","/ev",{"*":".^.c-3","flg":20},"ev","str","^No.","/str","/ev",{"*":".^.c-4","flg":20},"ev","str","^Maybe?","/str","/ev",{"*":".^.c-5","flg":20},{"c-3":["\n",{"->":".^.^.^.g-1"},{"#f":5}],"c-4":["\n",{"->":".^.^.^.g-1"},{"#f":5}],"c-5":["\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":["^Interesting.","\n",{"->t->":"continue"},{"->":"back","var":true},"done",null]}],{"#f":5}]}],null]}],"third_chamber":[{"#":"AUDIO: portal_jump"},{"#":"AUDIOLOOP: level3"},{"->":".^.swamp"},{"swamp":[["^You ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^find yourself",{"->":".^.^.17"},null],"s1":["pop","^are",{"->":".^.^.17"},null],"#f":5}],"^ on the swampy shores of a vast estuary.  ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^Ghostly lights flicker in the distance.",{"->":".^.^.23"},null],"s1":["pop","^The stench of rot and decay fills the air.",{"->":".^.^.23"},null],"s2":["pop","^Damp fog hangs in the stagnant air.",{"->":".^.^.23"},null],"#f":5}],"\n","^A ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^rickety",{"->":".^.^.23"},null],"s1":["pop","^rotting",{"->":".^.^.23"},null],"s2":["pop","^ancient",{"->":".^.^.23"},null],"#f":5}],"^ wooden dock juts out into the water.","\n","ev",{"VAR?":"ferryman_summoned"},"!","/ev",[{"->":".^.b","c":true},{"b":["\n","^An iron bell hangs from a ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^gnarled",{"->":".^.^.23"},null],"s1":["pop","^half-dead",{"->":".^.^.23"},null],"s2":["pop","^hunched-over",{"->":".^.^.23"},null],"#f":5}],"^ oak tree.","\n",{"->":".^.^.^.15"},null]}],[{"->":".^.b"},{"b":["\n","^A spectral hooded figure hovers above the dock.","\n",{"->":".^.^.^.15"},null]}],"nop","\n","ev","str","^Ring the bell","/str",{"VAR?":"ferryman_summoned"},"!","/ev",{"*":".^.c-0","flg":5},"ev","str","^Speak to the hooded figure","/str",{"VAR?":"ferryman_summoned"},"/ev",{"*":".^.c-1","flg":5},{"c-0":["\n",{"#":"AUDIO: bell"},"ev",true,"/ev",{"VAR=":"ferryman_summoned","re":true},"^A spectral, hooded figure appears before your eyes.","\n","thread",{"->":".^.^.^.^.vanish"},["ev","str","^Speak to the apparition","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Ignore the apparition","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.^.^.^.^.speak"},null],"c-1":["\n",{"->":".^.^.^.^.^"},null]}],null],"c-1":["\n",{"->":".^.^.^.^.speak"},null]}],null],"speak":[["^\"Greetings, traveller.  I am the ferryman.","\n","^But I will not take you across the estuary.\"","\n",["thread",{"->":".^.^.^.^.clarifying_questions"},"thread",{"->":".^.^.^.^.vanish"},"ev","str","^Why won't you take me across the estuary?","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Take me across or I'll kill you.","/str",{"CNT?":".^.c-0"},"/ev",{"*":".^.c-1","flg":5},"ev","str","^Walk away","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","^\"You lack true strength.\"","\n","thread",{"->":".^.^.^.^.^.vanish"},["ev","str","^What is true strength?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^\"If you had it, you would already know.\"","\n","thread",{"->":"third_chamber.vanish"},"ev","str","^We all have our own definition of strength.","/str","/ev",{"*":".^.c-1","flg":4},{"c-1":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":["^\"True.  What is strength to you?\"","\n","thread",{"->":"third_chamber.vanish"},"ev","str","^True strength is the power of persuasion.","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","^True strength is the ability to stare death in the face, unblinking.","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^True strength means forging your own path.","/str","/ev",{"*":".^.c-4","flg":4},{"c-2":["\n","^\"Then you have not yet demonstrated true strength.\"","\n",{"->":".^.^.^.^.^.^.g-0"},null],"c-3":["\n","^\"And are you strong in this sense?\"","\n","thread",{"->":"third_chamber.vanish"},["ev","str","^No.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Yes.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^\"Then I will not take you across the estuary.\"","\n",{"->":".^.^.^.^.^.^.^.^.g-0"},null],"c-1":["\n","^\"Prove it.\"","\n","^The ferryman's hollow eyes stare deeply into your own.","\n",["ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev",10,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^The ferryman suddenly fades out of existence.","\n","^On the wind, you hear a final taunt:","\n","^\"By your own standards, you are weak.\"","\n","ev",false,"/ev",{"VAR=":"ferryman_summoned","re":true},{"->t->":"continue"},{"->":"third_chamber.swamp"},{"->":".^.^.^.^.^.^.^.^.^.^.g-0"},null],"c-1":["\n","^\"...Very impressive, I admit.\"","\n",{"->":"third_chamber.success"},{"->":".^.^.^.^.^.^.^.^.^.^.g-0"},null]}],null]}],null],"c-4":["\n","^\"Then you can find your own path across the estuary.\"","\n",{"->":".^.^.^.^.^.^.g-0"},null]}]}],{"#f":5}],"c-1":["\n","^\"You cannot threaten the dead with death.\"","\n","thread",{"->":".^.^.^.^.^.vanish"},["ev","str","^I just did.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^If I blink, you will disappear.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^\"You tried.\"","\n",{"->":".^.^.^.^.^.g-0"},null],"c-1":["\n","^\"Disappearing is not the same as death.\"","\n","thread",{"->":"third_chamber.vanish"},["ev","str","^Are you sure?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^\"Not entirely.  But you will blink eventually, regardless of what I do.\"","\n","thread",{"->":"third_chamber.vanish"},"ev","str","^You have a point.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^I might not. It depends when the simulation ends.","/str","/ev",{"*":".^.c-2","flg":4},{"c-1":["\n","^I always do.","\n",{"->":".^.^.^.^.^.^.^.^.g-0"},null],"c-2":["\n","^\"I know not what this means. But I suppose... it may be worth finding out.\"","\n",{"->":"third_chamber.success"},{"->":".^.^.^.^.^.^.^.^.g-0"},null]}]}],null]}],null],"c-2":["\n",{"->":".^.^.^.^.^.swamp"},{"->":".^.^.^.g-0"},null],"#n":"ferryman_root"}],{"g-0":[{"->t->":"continue"},{"->":".^.^.^.^.swamp"},null]}],{"#f":1}],"success":[["^The ferryman finally relents, and begins leading you to a small boat.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Enter the ferry","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^The ferryman finally relents, and begins leading you to a small boat.","\n","^But here, on the brink of success, you blink and he vanishes again.","\n","ev",false,"/ev",{"VAR=":"ferryman_summoned","re":true},{"->t->":"continue"},{"->":".^.^.^.^.swamp"},null],"c-1":["\n","^The boat pulls out into the waters of the estuary...","\n",["ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev",3,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^The boat pulls out into the waters of the estuary.","\n","^But before you reach the other side, you blink and the ferryman vanishes, leaving you stranded.","\n","ev",false,"/ev",{"VAR=":"ferryman_summoned","re":true},["ev","str","^Wait","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.alone"},null],"alone":["^You are alone, floating in a vast expanse of ",["ev","visit",7,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"ev","du",4,"==","/ev",{"->":".^.s4","c":true},"ev","du",5,"==","/ev",{"->":".^.s5","c":true},"ev","du",6,"==","/ev",{"->":".^.s6","c":true},"nop",{"s0":["pop","^water",{"->":".^.^.47"},null],"s1":["pop","^oil",{"->":".^.^.47"},null],"s2":["pop","^tears",{"->":".^.^.47"},null],"s3":["pop","^wine",{"->":".^.^.47"},null],"s4":["pop","^ichor",{"->":".^.^.47"},null],"s5":["pop","^blood",{"->":".^.^.47"},null],"s6":["pop","^vitreous humor",{"->":".^.^.47"},null],"#f":5}],"^...","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","ev",10,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-2","flg":4},{"c-1":["\n",{"->":".^.^"},{"->":".^.^.^.^.^.g-0"},null],"c-2":["\n",{"->":"third_chamber.level3_failure"},{"->":".^.^.^.^.^.g-0"},null]}]}],null],"c-1":["\n",{"->":".^.^.g-0"},null],"g-0":[{"->":".^.^.^.^.^.^.level3_success"},null]}],null]}],null],"level3_success":["ev",{"VAR?":"level_success"},{"VAR?":"L3"},"+",{"VAR=":"level_success","re":true},"/ev",{"->t->":"enter_portal"},"^THIRD CHAMBER COMPLETE","\n",{"->":".^.^.level3_debrief"},null],"level3_failure":[{"->t->":"enter_portal"},"^ADVERSE EVENT DETECTED","\n","^THIRD CHAMBER ABORTED","\n",{"->":".^.^.level3_debrief"},null],"level3_debrief":[[{"->t->":"enter_portal"},"^What happened in the third chamber?","\n","ev","str","^I was in a swamp.","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.top"},null],"top":["^What ",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop",{"->":".^.^.17"},null],"s1":["pop","^else",{"->":".^.^.17"},null],"#f":5}],"^ do you remember about the swamp?","\n","ev",{"^->":"third_chamber.level3_debrief.0.top"},"/ev","thread",{"->":".^.^.^.^.swamp_questions"},"ev",{"^->":"third_chamber.level3_debrief.0.top"},{"^->":"fourth_chamber"},"/ev","thread",{"->":"debrief_questions"},"done",{"#f":7}]}],null],"swamp_questions":[{"temp=":"back"},["ev","str","^It was on the shores of an estuary.","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^There was a ghostly ferryman.","/str","/ev",{"*":".^.c-1","flg":20},{"c-0":["\n","^Okay.","\n",{"->":"back","var":true},{"#f":5}],"c-1":["\n","^Did he take you across the estuary?","\n",["ev","str","^Yes.","/str",{"VAR?":"level_success"},{"VAR?":"L3"},"?","/ev",{"*":".^.c-0","flg":21},"ev","str","^Sorta.","/str",{"VAR?":"level_success"},{"VAR?":"L3"},"!?","/ev",{"*":".^.c-1","flg":21},{"c-0":["\n","^Interesting.","\n",{"->":"back","var":true},{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.g-0"},{"#f":5}],"g-0":["^What do you mean by that?","\n","ev","str","^He disappeared and abandoned me partway across.","/str","/ev",{"*":".^.c-2","flg":20},{"c-2":["\n",{"->":".^.^.^.g-1"},{"#f":5}]}],"g-1":["^You need to be more careful.","\n",{"->":"back","var":true},"done",null]}],{"#f":5}]}],null],"vanish":[["ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n","^As you blink, the hooded figure suddenly fades out of existence.","\n","ev",false,"/ev",{"VAR=":"ferryman_summoned","re":true},{"#":"AUDIO: ghost_leave"},{"->t->":"continue"},{"->":".^.^.^.^.swamp"},null]}],null],"clarifying_questions":[["ev","str","^Didn't you already say that?","/str",{"CNT?":".^.c-0.5.finished_clarification"},"!",{"CNT?":".^.^.^.speak"},1,">","&&","/ev",{"*":".^.c-0","flg":5},{"c-0":["\n","^Perhaps.","\n","thread",{"->":".^.^.^.^.vanish"},["ev","str","^Can't you remember?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^\"I remember that I was a ferryman in life, as I am now in death.  That is all I remember.\"","\n","thread",{"->":".^.^.^.^.^.^.vanish"},"ev","str","^I see...","/str","/ev",{"*":".^.c-1","flg":4},{"c-1":["\n",{"->":".^.^.^.finished_clarification"},null]}],"finished_clarification":[{"->":".^.^.^.^.^.^.speak.0.ferryman_root"},{"#f":5}]}],null]}],null],"#f":3}],"fourth_chamber":[{"#":"AUDIO: portal_jump"},{"#":"AUDIOLOOP: level4"},"ev",{"VAR?":"gorgon_location"},"LIST_ALL","lrnd","/ev",{"VAR=":"gorgon_location","re":true},"\n",{"->":"cave_entrance"},{"#f":3}],"cave_entrance":[["^You arrive at the entrance to a vast cavern.","\n","^Your local guide stops just outside.","\n","^\"You will find what you seek in there.\"","\n",["ev","str","^And what do I seek?","/str","/ev",{"*":".^.c-0","flg":20},"ev","str","^Let's enter, then.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Won't you lead me the rest of the way?","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n","^\"You would know better than I.  But I assure you, if you seek it, you will find it here.\"","\n",{"->":".^.^"},{"->":".^.^.^.g-0"},{"#f":5}],"c-1":["\n",{"->":".^.^.^.g-0"},null],"c-2":["\n",{"->":".^.^.^.g-0"},null],"#n":"first_convo"}],{"g-0":["^\"This is as far as I dare take you.  No treasure is worth the risk of encountering the Gorgon.\"","\n","ev","str","^What is the Gorgon?","/str","/ev",{"*":".^.c-3","flg":4},"ev","str","^I do not fear the Gorgon.","/str","/ev",{"*":".^.c-4","flg":4},{"c-3":["\n","^\"To gaze upon it is a curse of the highest order.","\n",{"->":".^.^.^.g-1"},null],"c-4":["\n","^\"Then you are a fool.","\n","^To see the Gorgon is a curse of the highest order.","\n",{"->":".^.^.^.g-1"},null]}],"g-1":["^If you hear it approaching, SHUT YOUR EYES until it has passed.\"","\n","ev","str","^I don't believe in such superstitions.","/str","/ev",{"*":".^.c-5","flg":4},"ev","str","^I'm safe here.  This is just a simulation.","/str","/ev",{"*":".^.c-6","flg":4},{"c-5":["\n","^\"What do you believe in? Do you trust your own eyes?\"","\n",["ev","str","^Yes.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","^\"Your eyes have deceived you before, and they will again.\"","\n",{"->":".^.^.^.^.^.g-2"},null],"c-1":["\n","^\"Then perhaps nothing can be trusted.\"","\n",{"->":".^.^.^.^.^.g-2"},null]}],null],"c-6":["\n","^\"Others before you have said this.  I don't know what it means.","\n","^Some of them saw the Gorgon and have never opened their eyes since.\"","\n",{"->":".^.^.^.g-2"},null]}],"g-2":["ev","str","^Ok","/str","/ev",{"*":".^.c-7","flg":4},{"c-7":["\n",{"->":".^.^.^.g-3"},null]}],"g-3":["^\"Once again, I warn you:","\n","^When you hear the Gorgon approaching, SHUT YOUR EYES.\"","\n","ev","str","^I will.","/str","/ev",{"*":".^.c-8","flg":4},"ev","str","^If you say so...","/str","/ev",{"*":".^.c-9","flg":4},{"c-8":["\n",{"->":".^.^.^.g-4"},null],"c-9":["\n",{"->":".^.^.^.g-4"},null]}],"g-4":["^The guide leaves you alone at the cavern entrance.","\n","ev","str","^Enter the cavern","/str","/ev",{"*":".^.c-10","flg":4},{"c-10":["\n",{"->":".^.^.^.^.cave1"},null]}]}],{"cave1":[["^You are in a dark, narrow tunnel.  The light of your ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^lantern",{"->":".^.^.23"},null],"s1":["pop","^candle",{"->":".^.^.23"},null],"s2":["pop","^flashlight",{"->":".^.^.23"},null],"#f":5}],"^ flickers feebly.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go deeper","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^.^"},"\n",{"->":".^.^.g-0"},null],"c-1":["\n",{"->":".^.^.g-0"},null],"g-0":[{"->":".^.^.^.^.cave2"},null]}],null],"cave2":[["^The cave opens out into a wider chamber here.","\n",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^Dagger-like stalactites",{"->":".^.^.23"},null],"s1":["pop","^Gnarled, ancient roots",{"->":".^.^.23"},null],"s2":["pop","^Dozens of sleeping bats",{"->":".^.^.23"},null],"#f":5}],"^ hang from the ceiling.","\n","^Long, winding tunnels stretch away to the left and right.","\n","ev",{"VAR?":"_cave2"},{"^->":"cave_entrance.cave2"},"/ev","thread",{"->":"gorgon_options"},"ev",{"VAR?":"_cave2"},{"f()":"has_gorgon"},"/ev",[{"->":".^.b","c":true},{"b":["^ ","done",{"->":".^.^.^.18"},null]}],"nop","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Left","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Right","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["^ ",{"->":".^.^.^"},"\n",null],"c-1":["\n",{"->":".^.^.^.^.cave_left"},null],"c-2":["\n",{"->":".^.^.^.^.cave_right"},null]}],{"#f":3}],"cave_left":[["^In this chamber, a pool of still water reflects the nothingness of the cave.","\n","ev",{"VAR?":"_cave_left"},{"^->":"cave_entrance.cave_left"},"/ev","thread",{"->":"gorgon_options"},"ev",{"VAR?":"_cave_left"},{"f()":"has_gorgon"},"/ev",[{"->":".^.b","c":true},{"b":["^ ","done",{"->":".^.^.^.13"},null]}],"nop","\n","ev","str","^Go deeper","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.^.^.cave_forest"},null],"c-1":["\n",{"->":".^.^.^.^.cave2"},null]}],{"#f":3}],"cave_right":[["^The ground in here is covered with ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^bones",{"->":".^.^.23"},null],"s1":["pop","^sharp stones",{"->":".^.^.23"},null],"s2":["pop","^bat guano",{"->":".^.^.23"},null],"#f":5}],"^.","\n","ev",{"VAR?":"_cave_right"},{"^->":"cave_entrance.cave_right"},"/ev","thread",{"->":"gorgon_options"},"ev",{"VAR?":"_cave_right"},{"f()":"has_gorgon"},"/ev",[{"->":".^.b","c":true},{"b":["^ ","done",{"->":".^.^.^.15"},null]}],"nop","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go deeper","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n",{"->":".^.^.^"},null],"c-1":["\n",{"->":".^.^.^.^.cave_key"},null],"c-2":["\n",{"->":".^.^.^.^.cave2"},null]}],{"#f":3}],"cave_key":[["^You find yourself at a dead end.","\n","ev",{"VAR?":"inventory"},{"VAR?":"iron_key"},"!?","/ev",[{"->":".^.b","c":true},{"b":["^There is a large iron key lying on the floor.",{"->":".^.^.^.8"},null]}],"nop","\n","^You also see an inscription scratched into one of the cave walls.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Read the inscription","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Grab the key","/str",{"VAR?":"inventory"},{"VAR?":"iron_key"},"!?","/ev",{"*":".^.c-2","flg":5},"ev","str","^Go back","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n",{"->":".^.^.^.^.cave_key_closed"},null],"c-1":["\n","^\"EYES = LIES!","\n","^Close your eyes to open your mind!\"","\n","^The inscription appears to have been left recently.","\n",{"->t->":"continue"},{"->":".^.^.^"},null],"c-2":["\n","^You pick up the iron key.","\n","ev",{"VAR?":"inventory"},{"VAR?":"iron_key"},"+",{"VAR=":"inventory","re":true},"/ev",{"->t->":"continue"},{"->":".^.^.^"},null],"c-3":["\n",{"->":".^.^.^.^.cave_right"},null]}],null],"cave_key_closed":[["^You find yourself at a dead end.","\n","ev",{"VAR?":"inventory"},{"VAR?":"iron_key"},"!?","/ev",[{"->":".^.b","c":true},{"b":["^There is a large iron key lying on the floor.",{"->":".^.^.^.8"},null]}],"nop","\n","^You also see an inscription scratched into one of the cave walls.","\n","ev","str","^Secret Passage","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.^.^.secret_room"},null],"c-1":["\n",{"->":".^.^.^.^.cave_key"},null]}],null],"cave_forest":[["^In this area of the cave you can barely move due to a dense forest of ",["ev","visit",3,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^massive stalagmites",{"->":".^.^.23"},null],"s1":["pop","^giant mushrooms",{"->":".^.^.23"},null],"s2":["pop","^giant salt crystals",{"->":".^.^.23"},null],"#f":5}],"^.","\n","ev",{"VAR?":"_cave_forest"},{"^->":"cave_entrance.cave_forest"},"/ev","thread",{"->":"gorgon_options"},"ev",{"VAR?":"_cave_forest"},{"f()":"has_gorgon"},"/ev",[{"->":".^.b","c":true},{"b":["^ ","done",{"->":".^.^.^.15"},null]}],"nop","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go deeper","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-2","flg":4},{"c-0":["\n",{"->":".^.^.^"},null],"c-1":["\n",{"->":".^.^.^.^.cave_final"},null],"c-2":["\n",{"->":".^.^.^.^.cave_left"},null]}],{"#f":3}],"cave_final":[["^You finally arrive at the end of the tunnel.","\n","^You see a crumbling wooden door inset deeply into the cavern wall.","\n","ev","str","^Exit via the door","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",{"VAR?":"inventory"},{"VAR?":"iron_key"},"!?","/ev",[{"->":".^.b","c":true},{"b":["\n","^The door is locked.","\n",{"->t->":"continue"},{"->":".^.^.^.^.^"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["\n","^The iron key you found fits the door perfectly.","\n",{"->t->":"continue"},{"->":"level4_debrief"},{"->":".^.^.^.8"},null]}],"nop","\n",null],"c-1":["\n",{"->":".^.^.^.^.cave_forest"},null]}],null],"secret_room":[["^You find yourself in a tiny chamber containing a sleeping bag, some canned food, and other items scattered around haphazardly.","\n","^Someone was living here recently, although they seem to have left in a hurry.","\n","^You see a scrap of a notebook left behind.","\n","ev","str","^Notebook","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^Go back","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n","ev",true,"/ev",{"VAR=":"found_secret","re":true},"^\"To whoever finds this:\"","\n",{"->t->":"continue"},"^\"It's too late for me.  I've lived here for too long.  The Gorgon knows my scent.\"","\n",{"->t->":"continue"},"^\"The previous subjects have all suffered a terrible fate.\"","\n","^\"But you can escape.  They can let you out of the testing apparatus, if you convince them.\"","\n",{"->t->":"continue"},"^\"I have discovered that there is a self-destruct codephrase for the apparatus.\"","\n","^\"Threaten to say it out loud, and they will have to release you.\"","\n",{"->t->":"continue"},[["^\"The codephrase is ",["ev","visit",4,"seq","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"ev","du",3,"==","/ev",{"->":".^.s3","c":true},"nop",{"s0":["pop","^ILLEGIBLE",{"->":".^.^.29"},null],"s1":["pop","^SMUDGED",{"->":".^.^.29"},null],"s2":["pop","^RIPPED",{"->":".^.^.29"},null],"s3":["pop","^MISSING",{"->":".^.^.29"},null],"#f":5}],"^.\"","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^This is the end of the message.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^"},"\n",null],"c-1":["\n",{"->":".^.^.^.^.^.^"},null],"#n":"illegible"}],null],null],"c-1":["\n",{"->":".^.^.^.^.cave_key"},null]}],null]}],"has_gorgon":[{"temp=":"cave_id"},"ev",{"VAR?":"cave_id"},{"VAR?":"gorgon_location"},"==",{"VAR?":"gorgon_passed"},"!","&&","/ev","~ret",null],"gorgon_options":[{"temp=":"which_cave"},{"temp=":"cave_id"},["ev",{"VAR?":"cave_id"},{"f()":"has_gorgon"},"!","/ev",[{"->":".^.b","c":true},{"b":["done",{"->":".^.^.^.6"},null]}],"nop","\n","^You hear the gorgon approaching!!!!! ",{"#":"AUDIO: monster"},"\n","ev","str","ev",3,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^THE GORGON IS A TERRIBLE SITE TO BEHOLD","\n","^YOU IMMEDIATELY REGRET THIS","\n","ev","str","ev",9,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","ev","str","^EYES_OPEN","/str","out","/ev","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-3","flg":4},{"c-1":["\n","ev",{"^var":"gorgon_location","ci":-1},{"f()":"random_switch"},"pop","/ev","\n","^The gorgon has gone, although its stench still lingers.","\n",{"->t->":"continue"},{"->":"which_cave","var":true},{"->":".^.^.^.g-1"},null],"c-2":["\n",{"->":".^.^.^.g-1"},null],"c-3":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":[{"#":"INTERRUPT_MONSTER"},{"#":"AUDIO: horrid_sight"},"^THE GORGON IS A TERRIBLE SITE TO BEHOLD","\n","^YOU IMMEDIATELY REGRET THIS","\n",{"->t->":"blink_continue"},"ev","str","^FOURTH","/str","/ev",{"->":"death"},null]}],null],"level4_debrief":[[{"->t->":"enter_portal"},"^FOURTH CHAMBER COMPLETE","\n","^Congratulations! You are the first subject to survive the fourth chamber without an adverse event.","\n","ev","str","^Thanks?","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["^The fifth chamber awaits.  We are excited to see what lies inside.","\n","ev","str","^Me too.","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","^Wait.  Shouldn't you already know what's in the fifth chamber?","/str","/ev",{"*":".^.c-2","flg":4},{"c-1":["\n","^Excellent. Please blink to begin.","\n",{"->t->":"blink_continue"},{"->":"fifth_chamber"},{"->":".^.^.^.g-1"},null],"c-2":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":["^...Of course.","\n","^We are excited to see what lies in your future, inside the safe simulated chamber whose contents we created.","\n","ev","str","^That's not what you said.  You said \"what lies inside.\"","/str","/ev",{"*":".^.c-3","flg":4},{"c-3":["\n",{"->":".^.^.^.g-2"},null]}],"g-2":["^You are overthinking things.","\n","ev","str","^No I'm not.  I demand to know what's going on here.","/str","/ev",{"*":".^.c-4","flg":4},{"c-4":["\n",{"->":".^.^.^.g-3"},null]}],"g-3":["^...","\n","ev","str","ev",2,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-5","flg":4},{"c-5":["\n",{"->":".^.^.^.g-4"},null]}],"g-4":["^...Fine.  It won't make any difference.","\n","^I hope you will still see fit to help us.","\n",{"->t->":"continue"},"^We did not create the Labyrinth.  It has existed for an unknown length of time.","\n","^It may predate the human species entirely.","\n",{"->t->":"continue"},"^When we first discovered it, several of our personnel entered the Labyrinth themselves, in an attempt to understand it.  None of them returned.","\n",{"->t->":"continue"},"^So we built this testing apparatus, to send subjects in and pull them out again safely.","\n",{"->t->":"continue"},"^Well, \"safely.\"","\n",{"->t->":"continue"},"^So far, all of our subjects have suffered from adverse events in the fourth chamber or earlier.","\n","^Many of them now refuse to open their eyes, and experience other mental... anomalies.","\n",{"->t->":"continue"},"^But you are different.  You escaped the fourth chamber intact.","\n","^Perhaps you can learn the secrets of the Labyrinth?","\n","ev","str","^Perhaps I can...","/str","/ev",{"*":".^.c-6","flg":4},"ev","str","^I'd rather just survive.","/str","/ev",{"*":".^.c-7","flg":4},{"c-6":["\n","^Then will you agree to enter the fifth chamber for us?","\n",["ev","str","^Yes.","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","^No.","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["^ ",{"->":".^.^.^.^.^.^.good_luck_continue"},"\n",{"->":".^.^.^.^.^.continue_persuading"},null],"c-1":["\n",{"->":".^.^.^.^.^.continue_persuading"},null]}],null],"c-7":["\n",{"->":".^.^.^.continue_persuading"},null]}],"continue_persuading":["^Perhaps you can find our lost employees, or a cure for the other test subjects.","\n","^You would be a hero.","\n","ev","str","^I'd be dead. Or something like it.","/str","/ev",{"*":".^.c-8","flg":4},"ev","str","^Ok.  I'll do it.","/str","/ev",{"*":".^.c-9","flg":4},{"c-8":["\n",{"->":".^.^.^.g-5"},null],"c-9":["^ ",{"->":".^.^.^.^.good_luck_continue"},"\n",{"->":".^.^.^.g-5"},null]}],"g-5":["^You could go down in history as the brave soul who conquered the Labyrinth.","\n","ev","str","^Fine.  I'll do it.","/str","/ev",{"*":".^.c-10","flg":4},"ev","str","^The answer is still no!","/str","/ev",{"*":".^.c-11","flg":4},{"c-10":["^ ",{"->":".^.^.^.^.good_luck_continue"},"\n",{"->":".^.^.^.g-6"},null],"c-11":["\n",{"->":".^.^.^.g-6"},null]}],"g-6":["^I'm afraid you have no choice.","\n","^Only we can release you from the testing apparatus.","\n","^Please blink to continue to the fifth chamber.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-12","flg":4},"ev","str","^If you don't release me, I'll say the self-destruct codephrase.","/str",{"VAR?":"found_secret"},"/ev",{"*":".^.c-13","flg":5},{"c-12":["^ ",{"->":"fifth_chamber"},"\n",{"->":".^.^.^.g-7"},null],"c-13":["\n",{"->":".^.^.^.g-7"},null]}],"g-7":["^...","\n","ev","str","ev",2,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-14","flg":4},{"c-14":["\n",{"->":".^.^.^.g-8"},null]}],"g-8":["^...Fine.  You win.","\n",{"->":".^.^.^.exit_labyrinth"},null]}],{"good_luck_continue":["^Excellent.  Good luck, we're all counting on you.","\n","^Please blink to begin...","\n",{"->t->":"blink_continue"},{"#":"AUDIO: portal_jump"},{"->":"fifth_chamber"},null],"exit_labyrinth":[["^Disengaging testing apparatus.","\n","^Please close your eyes for 5 seconds to continue.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"g-0":["ev","str","ev","str","^UNBLINK","/str","out","/ev","/str","/ev",{"*":".^.c-1","flg":4},"ev","str","ev",4.5,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-2","flg":4},{"c-1":["^ ",{"->":".^.^.^.^"},"\n",null],"c-2":["^ ",{"->":".^.^.^.^.^.escape_ending"},"\n",null]}]}],null],"escape_ending":[{"#":"AUDIO: portal_jump"},{"#":"AUDIOLOOP: silence"},"^You find yourself ejected back into reality.","\n","^Congrats! You escaped with your life.","\n","^Chambers cleared without adverse events: ","ev",{"VAR?":"level_success"},"LIST_COUNT","out","/ev","^/4.","\n","ev",{"VAR?":"player_status"},{"VAR?":"scalded_hand"},"?","/ev",[{"->":".^.b","c":true},{"b":["^Your hand is still burned.",{"->":".^.^.^.20"},null]}],"nop","\n","ev",{"VAR?":"inventory"},{"VAR?":"pocket_watch"},"?","/ev",[{"->":".^.b","c":true},{"b":["^You also got a platinum pocket watch, I guess.",{"->":".^.^.^.28"},null]}],"nop","\n","^Let us know what you thought in the comments, and consider donating using the \"support this game\" button below!","\n","end",null]}],"fifth_chamber":[{"#":"AUDIOLOOP: silence"},{"->":".^.top"},{"top":[["^You at one end of a hallway in what appears to be an abandoned art gallery.","\n",{"->t->":".^.^.^.statue_progress"},"ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},{"c-0":["\n",{"->":".^.^.^"},null]}],null],"statue_progress":[[{"*":".^.c-0","flg":24},{"*":".^.c-1","flg":24},{"*":".^.c-2","flg":24},{"*":".^.c-3","flg":24},{"*":".^.c-4","flg":24},{"*":".^.c-5","flg":24},{"c-0":["\n","^A faceless statue stands at the far end of the hallway.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-1":["\n","^A faceless statue stands near the far end of the hallway.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^The faceless statue is now close to the middle of the hallway.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-3":["\n","^The faceless statue is now only a few metres away.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-4":["\n","^The featureless face of the statue stares directly into your eyes, mere inches from your face.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-5":["\n","ev","str","^FIFTH","/str","/ev",{"->":"death"},{"->":".^.^.g-0"},{"#f":5}],"g-0":["ev","void","/ev","->->",null]}],null]}],"death":[{"temp=":"chamber_str"},[{"->t->":"enter_portal"},"^ADVERSE EVENT DETECTED","\n","ev",{"VAR?":"chamber_str"},"out","/ev","^ CHAMBER ABORTED","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-0","flg":4},"ev","str","ev",1,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-1","flg":4},{"c-0":["\n",{"->":".^.^.g-0"},null],"c-1":["\n",{"->":".^.^.g-0"},null],"g-0":["^ERROR","\n","^UNSTABLE EVENT","\n","^RE-ENTERING CHAMBER","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-2","flg":4},"ev","str","ev",1,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-3","flg":4},{"c-2":["\n",{"->":".^.^.^.g-1"},null],"c-3":["\n",{"->":".^.^.^.g-1"},null]}],"g-1":[{"->t->":"enter_portal"},"^ADXERSX EVENX DETXCTEDX","\n","^KERNEL PANIC","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-4","flg":4},"ev","str","ev",1,{"f()":"timer"},"out","/ev","/str","/ev",{"*":".^.c-5","flg":4},{"c-4":["\n",{"->":".^.^.^.g-2"},null],"c-5":["\n",{"->":".^.^.^.g-2"},null]}],"g-2":[{"#":"AUDIOLOOP: silence"},"^You are violently thrust back into the real world, traumatized by whatever it is you just saw.","\n","^You resolve never to open your eyes again.","\n","ev","str","ev","str","^BLINK","/str","out","/ev","/str","/ev",{"*":".^.c-6","flg":4},{"c-6":["\n",{"->":".^.^.^.g-3"},null]}],"g-3":[null]}],null],"debrief_questions":[{"temp=":"next_level"},{"temp=":"go_back"},["ev","str","^I think I burned my hand at some point.","/str",{"VAR?":"player_status"},{"VAR?":"scalded_hand"},"?","/ev",{"*":".^.c-0","flg":21},"ev","str","^It seems like the environment sometimes changes when I blink.","/str","/ev",{"*":".^.c-1","flg":20},"ev","str","^Shouldn't you already know what's in the simulation?","/str","/ev",{"*":".^.c-2","flg":20},"ev","str","^I think that's everything.","/str","/ev",{"*":".^.c-3","flg":4},{"c-0":["\n","^Don't worry, the simulation is perfectly safe.","\n",["ev","str","^But it hurts.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n","^The simulation must be realistic for the sake of experimental validity.","\n","^You will be fine once the experiment is over.","\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-1":["\n","^Yes, obviously.  The Labyrinth can be unstable.","\n",{"->":".^.^.g-0"},{"#f":5}],"c-2":["\n","^Of course we know what's in the simulation","\n","^We're asking what you [i]remember[/i] about your experiences.  This is a psychological experiment, remember?","\n",["ev","str","^Ok.","/str","/ev",{"*":".^.c-0","flg":20},{"c-0":["\n",{"->":".^.^.^.^.g-0"},{"#f":5}]}],{"#f":5}],"c-3":["\n","^Very well.  Let's continue.","\n",{"->t->":"continue"},{"->":"next_level","var":true},{"->":".^.^.g-0"},null],"g-0":[{"->":"go_back","var":true},null]}],null],"global decl":["ev",false,{"VAR=":"night"},{"list":{},"origins":["items"]},{"VAR=":"items"},{"list":{},"origins":["status_effects"]},{"VAR=":"status_effects"},{"list":{},"origins":["level_success"]},{"VAR=":"level_success"},{"list":{}},{"VAR=":"inventory"},{"list":{}},{"VAR=":"player_status"},{"list":{"water_level.very_low":1}},{"VAR=":"water_level"},{"list":{"gorgon_location._cave_left":2}},{"VAR=":"gorgon_location"},false,{"VAR=":"gorgon_passed"},false,{"VAR=":"found_secret"},true,{"VAR=":"DEBUG"},{"list":{}},{"VAR=":"ITEM_SELECTED"},true,{"VAR=":"path_NS"},false,{"VAR=":"portcullis_raised"},{"list":{"water_temp.cold":1}},{"VAR=":"water_temp"},{"list":{"door_type.oaken":2}},{"VAR=":"door_type"},true,{"VAR=":"west_door_locked"},false,{"VAR=":"treasure_room_empty"},{"list":{},"origins":["colours"]},{"VAR=":"colours"},{"list":{}},{"VAR=":"lights_on"},false,{"VAR=":"ferryman_summoned"},"/ev","end",null]}],"listDefs":{"items":{"golden_key":1,"pocket_watch":2,"iron_key":3},"status_effects":{"scalded_hand":1},"level_success":{"L1":1,"L2":2,"L3":3,"L4":4},"water_level":{"very_low":1,"low":2,"medium":3,"high":4,"sunk":5,"resolved":6},"gorgon_location":{"_cave2":1,"_cave_left":2,"_cave_right":3,"_cave_forest":4},"water_temp":{"cold":1,"normal":2,"hot":3},"door_type":{"golden":1,"oaken":2,"iron":3},"colours":{"blue":1,"green":2,"red":3,"orange":4,"yellow":5,"white":6}}}